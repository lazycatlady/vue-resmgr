(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c474077"],{"0a98":function(t,a,e){"use strict";var l=e("7a0b"),i=e.n(l);i.a},"7a0b":function(t,a,e){},cc28:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticStyle:{margin:"10px"}},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus"},on:{click:t.addRes}},[t._v("新增")]),e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-remove"}},[t._v("批量删除")])],1),e("div",{staticClass:"table"},[e("el-table",{ref:"columnConfig",staticStyle:{width:"100%"},attrs:{height:"600",stripe:"",border:"",size:"small",data:t.tableData},on:{"row-dblclick":t.rowDblClick}},[e("el-table-column",{attrs:{type:"index",width:"40"}}),e("el-table-column",{attrs:{type:"selection",width:"45"}}),e("el-table-column",{attrs:{label:"资源操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-edit",type:"primary"},on:{click:function(e){t.handleEdit(a.row)}}}),e("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-setting",type:"warning"},on:{click:function(e){t.handleEditAttr(a.row)}}}),e("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(e){t.handleDelete(a.row)}}})]}}])}),e("el-table-column",{attrs:{label:"资源ID",prop:"TABLE_ID",width:"130"}}),e("el-table-column",{attrs:{label:"资源表名",prop:"TABLE_NAME","min-width":"100"}}),e("el-table-column",{attrs:{label:"资源名称",prop:"RESOURCE_NAME","min-width":"150"}}),e("el-table-column",{attrs:{label:"是否视图",prop:"ISVIEW",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:a.row.ISVIEW,callback:function(e){t.$set(a.row,"ISVIEW",e)},expression:"scope.row.ISVIEW"}})]}}])}),e("el-table-column",{attrs:{label:"排序SQL",prop:"ORDERBY_SQL"}}),e("el-table-column",{attrs:{label:"查询SQL",prop:"WHERE_SQL","min-width":"150"}})],1)],1),e("resForm",{attrs:{dialogState:t.dialogState},on:{initData:t.initData}})],1)},i=[],o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"userForm"},[e("el-dialog",{attrs:{size:"small",title:t.dialogState.name,visible:t.dialogState.show,"close-on-click-modal":!1},on:{"update:visible":function(a){t.$set(t.dialogState,"show",a)}}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{inline:!0,model:t.dialogState.formData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"资源ID",prop:"TABLE_ID"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.TABLE_ID,callback:function(a){t.$set(t.dialogState.formData,"TABLE_ID",a)},expression:"dialogState.formData.TABLE_ID"}})],1),e("el-form-item",{attrs:{label:"资源表名",prop:"TABLE_NAME"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.TABLE_NAME,callback:function(a){t.$set(t.dialogState.formData,"TABLE_NAME",a)},expression:"dialogState.formData.TABLE_NAME"}})],1),e("el-form-item",{attrs:{label:"中文表名",prop:"RESOURCE_NAME"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.RESOURCE_NAME,callback:function(a){t.$set(t.dialogState.formData,"RESOURCE_NAME",a)},expression:"dialogState.formData.RESOURCE_NAME"}})],1),e("el-form-item",{attrs:{label:"表别名",prop:"ALIAS_NAME"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.ALIAS_NAME,callback:function(a){t.$set(t.dialogState.formData,"ALIAS_NAME",a)},expression:"dialogState.formData.ALIAS_NAME"}})],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"查询条件sql",prop:"WHERE_SQL"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.WHERE_SQL,callback:function(a){t.$set(t.dialogState.formData,"WHERE_SQL",t._n(a))},expression:"dialogState.formData.WHERE_SQL"}})],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"排序条件sql",prop:"ORDERBY_SQL"}},[e("el-input",{attrs:{size:"small"},model:{value:t.dialogState.formData.ORDERBY_SQL,callback:function(a){t.$set(t.dialogState.formData,"ORDERBY_SQL",t._n(a))},expression:"dialogState.formData.ORDERBY_SQL"}})],1)],1),e("el-form-item",[e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){t.submitForm("ruleForm")}}},[t._v(t._s("edit"==t.dialogState.type?"修改":"保存"))])],1)],1)],1)],1)},r=[],s={name:"resForm",components:{},props:{dialogState:Object,groups:Array},data:function(){return{roleData:[],rules:{TABLE_ID:[{required:!0,message:"请输入表ID",trigger:"blur"}],TABLE_NAME:[{required:!0,message:"请输入表名",trigger:"blur"}],RESOURCE_NAME:[{required:!0,message:"请输入资源名称",trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;"edit"==a.dialogState.type?a.$ajax.post(a.$api.editTableRes,a.dialogState.formData).then(function(t){t&&t.data&&0==t.data.errno?(a.$message.editSuccess(),a.$emit("initData"),a.dialogState.show=!1):a.$message.editError(t.data.errmsg)}):a.$ajax.post(a.$api.addTableRes,a.dialogState.formData).then(function(t){t&&t.data&&0==t.data.errno?(a.$message.addSuccess(),a.$emit("initData"),a.dialogState.show=!1):a.$message.addError(t.data.errmsg)})})}}},n=s,d=e("2877"),c=Object(d["a"])(n,o,r,!1,null,null,null);c.options.__file="resForm.vue";var m=c.exports,u=e("5391"),p={components:{resForm:m,resTree:u["a"]},data:function(){return{tableData:[],dialogState:{show:!1,type:"add",name:"新增资源",formData:{}}}},computed:{},mounted:function(){this.initData()},methods:{addRes:function(){this.dialogState.show=!this.dialogState.show,this.dialogState.type="add",this.dialogState.name="新增资源",this.dialogState.formData={}},handleEdit:function(t){this.dialogState.show=!this.dialogState.show,this.dialogState.type="edit",this.dialogState.name="编辑资源",this.dialogState.formData=t},handleEditAttr:function(t){this.$router.push({path:"/resConfigList",query:{tableId:t["TABLE_ID"]}})},handleDelete:function(t){var a=this;this.$message.confirmDelete(function(){a.$ajax.post(a.$api.deleteTableRes,t).then(function(t){t.data&&0==t.data.errno?(a.$message.deleteSuccess(),a.initData()):a.$message.deleteError(t.data.errmsg)})})},rowDblClick:function(t){this.$store.commit("selectAttrData",t),this.$router.push({path:"/resAttrEdit",query:{tableId:this.tableId,id:t.COLUMN_ID,type:"edit"}})},saveClick:function(){var t={};this.tableData=this.tableData.map(function(t,a){return t.id=a,t}),t.form=this.tableData,t.tableId=this.tableId,this.$ajax.post(this.$api.editTableResColumns,t).then(function(t){t.data&&console.log(t.data)})},initData:function(){var t=this;this.$ajax.get(this.$api.getTableRes).then(function(a){a.data.length>0&&(t.tableData=a.data)})}},watch:{$route:function(){this.getColumnData()}}},f=p,g=(e("0a98"),Object(d["a"])(f,l,i,!1,null,"db51da32",null));g.options.__file="resTableList.vue";a["default"]=g.exports}}]);