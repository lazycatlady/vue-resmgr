(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66fc084a"],{"153d":function(t,a,e){"use strict";var s=e("5250"),i=e.n(s);i.a},5250:function(t,a,e){},7553:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"resEdit"},[e("el-card",{staticClass:"card-content"},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t._v(t._s("add"==t.optionType?"新增":"编辑"))]),e("el-form",{ref:"form",staticClass:"form",attrs:{inline:!0,model:t.formData,"label-width":"120px",size:"small"}},[t._l(t.columnData,function(a,s){return e("el-row",{directives:[{name:"show",rawName:"v-show",value:"10"!==a.PROPERTY_TYPE,expression:"item.PROPERTY_TYPE !== '10'"}],key:s,staticClass:"item"},[e("el-col",{staticClass:"title",attrs:{span:8}},[e("span",[t._v(t._s(a.COLUMN_CNAME))])]),e("el-col",{attrs:{span:16}},["10"==a.PROPERTY_TYPE?[e("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(t.formData[a.COLUMN_NAME]))])]:"2"==a.PROPERTY_TYPE?[e("el-select",{staticStyle:{width:"100%"},attrs:{remote:"","remote-method":t.getSjzdData},model:{value:t.formData[a.COLUMN_NAME],callback:function(e){t.$set(t.formData,a.COLUMN_NAME,e)},expression:"formData[item.COLUMN_NAME]"}},t._l(t.dropDownListData[a.COLUMN_NAME],function(t,a){return e("el-option",{key:a,attrs:{label:t.NAME,value:t.id}})}))]:"4"==a.PROPERTY_TYPE?[e("el-select",{staticStyle:{width:"100%"},model:{value:t.formData[a.COLUMN_NAME],callback:function(e){t.$set(t.formData,a.COLUMN_NAME,e)},expression:"formData[item.COLUMN_NAME]"}},t._l(t.dropDownListData[a.COLUMN_NAME],function(t,a){return e("el-option",{key:a,attrs:{label:t.NAME,value:t.id}})}))]:"5"==a.PROPERTY_TYPE?[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-DD",type:"date",placeholder:"选择日期"},model:{value:t.formData[a.COLUMN_NAME],callback:function(e){t.$set(t.formData,a.COLUMN_NAME,e)},expression:"formData[(item.COLUMN_NAME)]"}})]:[e("el-input",{attrs:{width:"320"},model:{value:t.formData[a.COLUMN_NAME],callback:function(e){t.$set(t.formData,a.COLUMN_NAME,e)},expression:"formData[(item.COLUMN_NAME)]"}})]],2)],1)}),e("el-col",{staticClass:"footer",attrs:{span:24,offset:9}},[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),e("el-button",{on:{click:t.$util.goBackRouter}},[t._v("取消")])],1)],2)],1)],1)},i=[],o=(e("ac6a"),e("cadf"),e("551c"),e("097d"),{name:"resEdit",data:function(){return{columnData:[],formData:{},dropDownListData:{},primaryKey:{}}},computed:{optionType:function(){return this.$route.query.type},tableId:function(){return this.$route.query.tableId},resId:function(){return this.$route.query.id}},mounted:function(){var t=this,a=this;this.getConfig().then(function(){t.columnData.forEach(function(e){"2"!=e.PROPERTY_TYPE&&"4"!=e.PROPERTY_TYPE||a.getSjzdData(e.COLUMN_NAME,e.TYPESQL),"10"==e.PROPERTY_TYPE&&(t.primaryKey.name=e.COLUMN_NAME)})}),"edit"==this.optionType&&this.getFormData()},methods:{onSubmit:function(){var t=this,a={};a.form=this.$refs["form"].model,a.tableId=this.tableId,"edit"==this.optionType?(a.primaryKey=this.primaryKey,this.$ajax.post(this.$api.editTableData,a).then(function(a){a&&a.data&&1==a.data.data?(t.$message.editSuccess(),t.$router.go(-1)):t.$message.editError(a.data.errmsg)})):this.$ajax.post(this.$api.addTableData,a).then(function(a){a&&a.data&&0==a.data.data?(t.$message.addSuccess(),t.$router.go(-1)):t.$message.addError(a.data.errmsg)})},getConfig:function(){var t=this;return this.$ajax.get(this.$api.getTableColumns,{flag:"UPDATE",tableId:this.tableId}).then(function(a){a.data.length&&a.data.length>0&&(t.columnData=a.data)})},getFormData:function(){var t=this;this.primaryKey.value=this.resId,this.$ajax.get(this.$api.queryDataById,{tableId:this.tableId,id:this.resId}).then(function(a){t.formData=a.data})},getSjzdData:function(t,a){var e=this;this.$ajax.get(this.$api.getDropDownListData,{typesql:a}).then(function(a){e.$set(e.dropDownListData,t,a.data)})}}}),r=o,n=(e("153d"),e("2877")),l=Object(n["a"])(r,s,i,!1,null,"3ea2637f",null);l.options.__file="ResEdit.vue";a["default"]=l.exports}}]);